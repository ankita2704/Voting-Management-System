{"ast":null,"code":"import{useEffect,useState}from\"react\";import\"../styles/votelist.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const partyLogos={bjp:\"/party-logos/BJP logo.png\",inc:\"/party-logos/INC logo.jpg\",shivsena:\"/party-logos/shivsena logo.png\",sp:\"/party-logos/SP logo.jpg\"};function VoteList(){const[candidates,setCandidates]=useState([]);const[error,setError]=useState(\"\");useEffect(()=>{const fetchCandidates=async()=>{try{const token=localStorage.getItem(\"token\");const res=await fetch(\"http://localhost:5000/candidate/list\",{headers:{Authorization:\"Bearer \".concat(token)}});const data=await res.json();if(!res.ok){throw new Error(\"Failed to fetch candidates\");}setCandidates(data.candidates);}catch(err){console.error(err);setError(\"Server error while fetching candidates\");}};fetchCandidates();},[]);const handleVote=async candidateId=>{try{const token=localStorage.getItem(\"token\");const res=await fetch(\"http://localhost:5000/candidate/vote/\".concat(candidateId),{method:\"POST\",headers:{Authorization:\"Bearer \".concat(token)}});const data=await res.json();if(res.ok){alert(\"Vote recorded successfully\");}else{alert(data.message);}}catch(err){alert(\"Server error while voting\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"vote-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"vote-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"vote-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"List of Electors\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"app-logo\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"main logo.jpg\",alt:\"logo\"}),/*#__PURE__*/_jsx(\"p\",{children:\"VOTING APP\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"vote-list\",children:candidates.map((c,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"vote-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"candidate-box\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"index\",children:[index+1,\".\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:c.name}),/*#__PURE__*/_jsx(\"div\",{className:\"party-icon\",children:/*#__PURE__*/_jsx(\"img\",{src:partyLogos[c.party.toLowerCase()],alt:c.party,className:\"party-logo\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"vote-btn\",onClick:()=>handleVote(c._id),children:\"Vote\"})]},c._id))})]})});}export default VoteList;","map":{"version":3,"names":["useEffect","useState","jsx","_jsx","jsxs","_jsxs","partyLogos","bjp","inc","shivsena","sp","VoteList","candidates","setCandidates","error","setError","fetchCandidates","token","localStorage","getItem","res","fetch","headers","Authorization","concat","data","json","ok","Error","err","console","handleVote","candidateId","method","alert","message","className","children","src","alt","map","c","index","name","party","toLowerCase","onClick","_id"],"sources":["C:/Users/Ankita/OneDrive/Desktop/Voting App/frontend/src/pages/VoteList.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport \"../styles/votelist.css\";\r\n\r\nconst partyLogos = {\r\n  bjp: \"/party-logos/BJP logo.png\",\r\n  inc: \"/party-logos/INC logo.jpg\",\r\n  shivsena: \"/party-logos/shivsena logo.png\",\r\n  sp: \"/party-logos/SP logo.jpg\",\r\n};\r\n\r\nfunction VoteList() {\r\n  const [candidates, setCandidates] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchCandidates = async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n\r\n        const res = await fetch(\"http://localhost:5000/candidate/list\", {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        const data = await res.json();\r\n\r\n        if (!res.ok) {\r\n          throw new Error(\"Failed to fetch candidates\");\r\n        }\r\n\r\n       \r\n        setCandidates(data.candidates);\r\n\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError(\"Server error while fetching candidates\");\r\n      }\r\n    };\r\n\r\n    fetchCandidates();\r\n  }, []);\r\n\r\n  const handleVote = async (candidateId) => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n\r\n      const res = await fetch(\r\n        `http://localhost:5000/candidate/vote/${candidateId}`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        alert(\"Vote recorded successfully\");\r\n      } else {\r\n        alert(data.message);\r\n      }\r\n    } catch (err) {\r\n      alert(\"Server error while voting\");\r\n    }\r\n  };\r\n\r\n  return (\r\n  <div className=\"vote-wrapper\">\r\n    <div className=\"vote-card\">\r\n\r\n      <div className=\"vote-header\">\r\n        <h2>List of Electors</h2>\r\n\r\n        <div className=\"app-logo\">\r\n          <img src=\"main logo.jpg\" alt=\"logo\" />\r\n          <p>VOTING APP</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"vote-list\">\r\n        {candidates.map((c, index) => (\r\n          <div className=\"vote-row\" key={c._id}>\r\n            <div className=\"candidate-box\">\r\n              <span className=\"index\">{index + 1}.</span>\r\n              <span className=\"name\">{c.name}</span>\r\n\r\n              <div className=\"party-icon\">\r\n                <img\r\n  src={partyLogos[c.party.toLowerCase()]}\r\n  alt={c.party}\r\n  className=\"party-logo\"\r\n/>\r\n\r\n              </div>\r\n            </div>\r\n\r\n            <button\r\n              className=\"vote-btn\"\r\n              onClick={() => handleVote(c._id)}\r\n            >\r\n              Vote\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n);\r\n\r\n}\r\n\r\nexport default VoteList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}