{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import\"../styles/admin.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminManage(){const navigate=useNavigate();const[candidates,setCandidates]=useState([]);const[name,setName]=useState(\"\");const[party,setParty]=useState(\"\");const[age,setAge]=useState(\"\");const[mobile,setMobile]=useState(\"\");const token=localStorage.getItem(\"token\");// Fetch candidate list\nconst getCandidates=async()=>{try{const res=await fetch(\"http://localhost:5000/candidate/list\");const data=await res.json();if(res.ok){setCandidates(data.candidates);}}catch(err){alert(\"Server error\");}};useEffect(()=>{getCandidates();},[]);// Add candidate\nconst addCandidate=async e=>{e.preventDefault();try{const res=await fetch(\"http://localhost:5000/candidate\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify({name:name,party:party,age:Number(age),mobile:mobile})});const data=await res.json();if(res.ok){alert(\"Candidate added\");setName(\"\");setParty(\"\");setAge(\"\");setMobile(\"\");getCandidates();}else{alert(data.error||data.message||\"Error\");}}catch(err){alert(\"Server error\");}};// Delete candidate\nconst deleteCandidate=async id=>{try{const res=await fetch(\"http://localhost:5000/candidate/\".concat(id),{method:\"DELETE\",headers:{Authorization:\"Bearer \".concat(token)}});if(res.ok){alert(\"Candidate deleted\");getCandidates();}}catch(err){alert(\"Server error\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Manage\"}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-nav\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/admin/count\"),children:\"Vote Count\"})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Manage\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addCandidate,className:\"admin-form\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Candidate Name\",value:name,onChange:e=>setName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Party\",value:party,onChange:e=>setParty(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Age\",value:age,onChange:e=>setAge(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Mobile\",value:mobile,onChange:e=>setMobile(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Party\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Mobile\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:candidates.map(c=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:c.name}),/*#__PURE__*/_jsx(\"td\",{children:c.party}),/*#__PURE__*/_jsx(\"td\",{children:c.age}),/*#__PURE__*/_jsx(\"td\",{children:c.mobile}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteCandidate(c._id),children:\"Delete\"})})]},c._id))})]})]});}export default AdminManage;","map":{"version":3,"names":["useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","AdminManage","navigate","candidates","setCandidates","name","setName","party","setParty","age","setAge","mobile","setMobile","token","localStorage","getItem","getCandidates","res","fetch","data","json","ok","err","alert","addCandidate","e","preventDefault","method","headers","Authorization","concat","body","JSON","stringify","Number","error","message","deleteCandidate","id","className","children","onClick","onSubmit","placeholder","value","onChange","target","required","type","map","c","_id"],"sources":["C:/Users/Ankita/OneDrive/Desktop/Voting App/frontend/src/pages/AdminManage.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"../styles/admin.css\";\r\n\r\nfunction AdminManage() {\r\n  const navigate = useNavigate();\r\n  const [candidates, setCandidates] = useState([]);\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [party, setParty] = useState(\"\");\r\n  const [age, setAge] = useState(\"\");\r\n  const [mobile, setMobile] = useState(\"\");\r\n\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  // Fetch candidate list\r\n  const getCandidates = async () => {\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/candidate/list\");\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        setCandidates(data.candidates);\r\n      }\r\n    } catch (err) {\r\n      alert(\"Server error\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getCandidates();\r\n  }, []);\r\n\r\n  // Add candidate\r\n  const addCandidate = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/candidate\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          name: name,\r\n          party: party,\r\n          age: Number(age),\r\n          mobile: mobile,\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        alert(\"Candidate added\");\r\n        setName(\"\");\r\n        setParty(\"\");\r\n        setAge(\"\");\r\n        setMobile(\"\");\r\n        getCandidates();\r\n      } else {\r\n        alert(data.error || data.message || \"Error\");\r\n      }\r\n    } catch (err) {\r\n      alert(\"Server error\");\r\n    }\r\n  };\r\n\r\n  // Delete candidate\r\n  const deleteCandidate = async (id) => {\r\n    try {\r\n      const res = await fetch(\r\n        `http://localhost:5000/candidate/${id}`,\r\n        {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      if (res.ok) {\r\n        alert(\"Candidate deleted\");\r\n        getCandidates();\r\n      }\r\n    } catch (err) {\r\n      alert(\"Server error\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-wrapper\">\r\n      <h2>Admin Manage</h2>\r\n\r\n<div className=\"admin-nav\">\r\n  <button onClick={() => navigate(\"/admin/count\")}>Vote Count</button>\r\n</div>\r\n\r\n<h2>Admin Manage</h2>\r\n\r\n      <form onSubmit={addCandidate} className=\"admin-form\">\r\n        <input\r\n          placeholder=\"Candidate Name\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <input\r\n          placeholder=\"Party\"\r\n          value={party}\r\n          onChange={(e) => setParty(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <input\r\n          type=\"number\"\r\n          placeholder=\"Age\"\r\n          value={age}\r\n          onChange={(e) => setAge(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <input\r\n          placeholder=\"Mobile\"\r\n          value={mobile}\r\n          onChange={(e) => setMobile(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <button type=\"submit\">Add</button>\r\n      </form>\r\n\r\n      <table className=\"admin-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th>\r\n            <th>Party</th>\r\n            <th>Age</th>\r\n            <th>Mobile</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          {candidates.map((c) => (\r\n            <tr key={c._id}>\r\n              <td>{c.name}</td>\r\n              <td>{c.party}</td>\r\n              <td>{c.age}</td>\r\n              <td>{c.mobile}</td>\r\n              <td>\r\n                <button onClick={() => deleteCandidate(c._id)}>\r\n                  Delete\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminManage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}